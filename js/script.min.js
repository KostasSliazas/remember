!function(){"use strict";const prekes=document.querySelectorAll("input");function refresh(){const ul=document.getElementById("list");let sum=0;ul.innerHTML="";const data=Object.assign({},window.localStorage);for(const keys in data){let array=[];"lastKey"!==keys&&(array=JSON.parse(data[keys]),sum+=parseFloat(array[3]),ul.innerHTML+=`<span class="delete" id="id${keys}">&times;</span><span>${array[1]}</span><span>${array[2]}</span><span>${array[3]}</span>`)}ul.innerHTML+=`<span></span><span></span><span>viso</span><span>${sum}</span>`}function validateForm(){const x=document.forms.prekes.preke.value;if(x.length>1)return!0}function createElements(){if(validateForm()){const items=[];prekes.forEach(elem=>{items.push(elem.id,elem.value),elem.value=""});let lastKey=Number(window.localStorage.lastKey)||(window.localStorage.lastKey=JSON.stringify(0));lastKey=window.localStorage.lastKey++,window.localStorage.setItem(lastKey,JSON.stringify(items))}}function clearLocalStorage(){const retVal=window.confirm("Do you want delete all data?");if(!0!==retVal)return!1;window.localStorage.clear()}function getConfirmation(){const retVal=window.confirm("Do you want delete?");return!0===retVal}function deleteOneItem(el){let ids=el.target.id;ids=ids.replace(/\D/g,""),getConfirmation()&&window.localStorage.removeItem(ids)}"undefined"==typeof Storage&&(document.body.innerText+="local storage not working..."),document.addEventListener("click",(function(e){if(e.preventDefault(),"BUTTON"!==e.target.tagName&&"SPAN"!==e.target.tagName)return!1;"primest"===e.target.id&&validateForm()&&createElements(),e.target.classList.contains("delete")&&deleteOneItem(e),"clearLocalStorage"===e.target.id&&clearLocalStorage(),refresh()})),refresh()}();